---

**ä½œä¸šè¯´æ˜æ–‡æ¡£**

**ä¸€ã€é¡¹ç›®ç®€ä»‹**

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿâ€œå®šå‘è·‘æ­¥å¤ºå† â€æ¯”èµ›çš„ Web API ç³»ç»Ÿï¼ŒåŸºäº Flask å’Œ SQLAlchemy å®ç°ï¼Œä½¿ç”¨ MySQL ä½œä¸ºåç«¯æ•°æ®åº“ã€‚æ”¯æŒåˆ›å»ºå¤šä¸ªæ¯”èµ›ã€æ·»åŠ è¿åŠ¨å‘˜ã€æäº¤å®æ—¶ä½ç½®ã€åˆ¤æ–­æ¯”èµ›ç»“æœã€æŸ¥è¯¢çŠ¶æ€ç­‰åŠŸèƒ½ã€‚

---

**äºŒã€ä½¿ç”¨æŠ€æœ¯æ ˆ**

| **æ¨¡å—** | **æŠ€æœ¯è¯´æ˜**              |
| ------ | --------------------- |
| åç«¯æ¡†æ¶   | Flask                 |
| ORMå·¥å…·  | SQLAlchemy            |
| æ•°æ®åº“    | MySQL                 |
| è¯·æ±‚æµ‹è¯•   | requestsåº“ + å®¢æˆ·ç«¯è„šæœ¬     |
| å¯é€‰å‰ç«¯   | HTML + JSï¼ˆindex.htmlï¼‰ |

---

**ä¸‰ã€API æ¥å£è®¾è®¡ä¸åŠŸèƒ½æ˜ å°„**

**1. åˆ›å»ºæ¯”èµ›**

â€¢ **URL**ï¼šPOST /games

â€¢ **å‚æ•°**ï¼ˆJSONï¼‰ï¼š

```
{
  "checkpoints": [
    {"x": 0.0, "y": 0.0},
    {"x": 5.0, "y": 5.0},
    {"x": 10.0, "y": 10.0}
  ]
}
```

â€¢ **åŠŸèƒ½**ï¼šåˆ›å»ºåŒ…å«æ£€æŸ¥ç‚¹çš„æ¸¸æˆï¼Œè¿”å›æ–°å»ºçš„ game_idã€‚

â€¢ **è¯´æ˜**ï¼šæ»¡è¶³åŠŸèƒ½ç‚¹ **â‘¡**

---

**2. æ·»åŠ è¿åŠ¨å‘˜**

â€¢ **URL**ï¼šPOST /games/<game_id>/players

â€¢ **å‚æ•°**ï¼ˆJSONï¼‰ï¼š

```
{
  "player_id": 1,
  "x": 0.0,
  "y": 0.0
}
```

â€¢ **åŠŸèƒ½**ï¼šå‘æŒ‡å®šæ¯”èµ›ä¸­æ·»åŠ è¿åŠ¨å‘˜ï¼Œè‹¥é‡å¤æ·»åŠ åˆ™æŠ¥é”™ã€‚

â€¢ **è¯´æ˜**ï¼šæ»¡è¶³åŠŸèƒ½ç‚¹ **â‘¢**

---

**3. æäº¤ä½ç½®**

â€¢ **URL**ï¼šPOST /games/<game_id>/players/<player_id>/location

â€¢ **å‚æ•°**ï¼ˆJSONï¼‰ï¼š

```
{
  "x": 5.0,
  "y": 5.0
}
```

â€¢ **åŠŸèƒ½**ï¼šæ›´æ–°è¿åŠ¨å‘˜åœ¨æ¯”èµ›ä¸­çš„ä½ç½®ï¼Œåˆ¤æ–­æ˜¯å¦åˆ°è¾¾æ£€æŸ¥ç‚¹æˆ–ç»ˆç‚¹å¹¶è®°å½•æˆç»©ï¼›è‹¥æ¸¸æˆå·²ç»“æŸï¼Œåˆ™ç›´æ¥è¿”å›å‰ä¸‰åç»“æœã€‚

â€¢ **è¯´æ˜**ï¼šæ»¡è¶³åŠŸèƒ½ç‚¹ **â‘£** å’Œ **â‘¦**

---

**4. è·å–æ£€æŸ¥ç‚¹**

â€¢ **URL**ï¼šGET /games/<game_id>/checkpoints

â€¢ **è¿”å›**ï¼š

```
{
  "status": "å·²ç»“æŸ" | "æœªç»“æŸ",
  "checkpoints": [{"x": ..., "y": ...}, ...]
}
```

â€¢ **åŠŸèƒ½**ï¼šè¿”å›æ¯”èµ›çš„æ‰€æœ‰æ£€æŸ¥ç‚¹åæ ‡åŠå½“å‰çŠ¶æ€ã€‚

â€¢ **è¯´æ˜**ï¼šæ»¡è¶³åŠŸèƒ½ç‚¹ **â‘¤**

---

**5. è·å–æ¸¸æˆçŠ¶æ€**

â€¢ **URL**ï¼šGET /games/<game_id>/status

â€¢ **è¿”å›**ï¼š

```
{
  "status": "å·²ç»“æŸ" | "æœªç»“æŸ",
  "champion": 1,
  "runner_up": 2,
  "third_place": 3
}
```

â€¢ **åŠŸèƒ½**ï¼šæŸ¥è¯¢æ¸¸æˆå½“å‰çŠ¶æ€åŠæ¯”èµ›å‰ä¸‰åé€‰æ‰‹ã€‚

â€¢ **è¯´æ˜**ï¼šæ»¡è¶³åŠŸèƒ½ç‚¹ **â‘¥**

---

**6. åˆ é™¤æ¸¸æˆ**

â€¢ **URL**ï¼šDELETE /games/<game_id>

â€¢ **åŠŸèƒ½**ï¼šç”¨äºæ¸…é™¤æ— ç”¨æ¯”èµ›æ•°æ®ï¼Œé˜²æ­¢æ•°æ®åº“å †ç§¯ã€‚

---

**å››ã€æ•°æ®åº“è®¾è®¡è¯´æ˜**

**è¡¨ç»“æ„ä¸€è§ˆï¼š**

**games è¡¨**

| **å­—æ®µå**     | **ç±»å‹**  | **è¯´æ˜**               |
| ----------- | ------- | -------------------- |
| game_id     | Integer | ä¸»é”®ï¼Œè‡ªå¢                |
| status      | Enum    | çŠ¶æ€ï¼ˆongoing/finishedï¼‰ |
| champion    | Integer | å† å†›ID                 |
| runner_up   | Integer | äºšå†›ID                 |
| third_place | Integer | å­£å†›ID                 |

**checkpoints è¡¨**

| **å­—æ®µå**       | **ç±»å‹**  | **è¯´æ˜**  |
| ------------- | ------- | ------- |
| checkpoint_id | Integer | ä¸»é”®ï¼Œè‡ªå¢   |
| game_id       | Integer | å¤–é”®ï¼Œå…³è”æ¯”èµ› |
| x, y          | Float   | åæ ‡ç‚¹     |

**players è¡¨**

| **å­—æ®µå**         | **ç±»å‹**   | **è¯´æ˜** |
| --------------- | -------- | ------ |
| player_id       | Integer  | ä¸»é”®ï¼ˆå¤åˆï¼‰ |
| game_id         | Integer  | ä¸»é”®ï¼ˆå¤åˆï¼‰ |
| x, y            | Float    | å®æ—¶ä½ç½®åæ ‡ |
| reached         | Integer  | åˆ°è¾¾æ£€æŸ¥ç‚¹æ•° |
| finished        | Boolean  | æ˜¯å¦å®Œæˆæ¯”èµ› |
| submission_time | DateTime | æäº¤æ—¶é—´æˆ³  |

---

**äº”ã€è¿è¡Œè¯´æ˜**

**ğŸ› ï¸ å®‰è£…ä¾èµ–ï¼š**

```
pip install -r requirements.txt
```

**ğŸš€ å¯åŠ¨ Flask æœåŠ¡ï¼š**

```
python /Users/lifulin/Desktop/running_game_api/Game/app.py
```

é»˜è®¤å¯åŠ¨åœ¨ http://localhost:5000ã€‚

**ğŸ§ª è¿è¡Œå®¢æˆ·ç«¯æµ‹è¯•è„šæœ¬ï¼š**

```
python /Users/lifulin/Desktop/client_test.py
```

ä¹Ÿå¯ä»¥ä½¿ç”¨ Postman/Web é¡µé¢æµ‹è¯•ã€‚

---

**å…­ã€æµ‹è¯•æˆªå›¾/æ¼”ç¤ºé¡µé¢**



![æˆªå±2025-03-25 00.22.28.png](/var/folders/_h/mf3tfz6x7wv3t2ddn9tf7tch0000gn/T/TemporaryItems/NSIRD_screencaptureui_fm8sEE/æˆªå±2025-03-25%2000.22.28.png)

![æˆªå±2025-03-25 00.20.41.png](/var/folders/_h/mf3tfz6x7wv3t2ddn9tf7tch0000gn/T/TemporaryItems/NSIRD_screencaptureui_wMhuIg/æˆªå±2025-03-25%2000.20.41.png)

![æˆªå±2025-03-25 00.20.57.png](/var/folders/_h/mf3tfz6x7wv3t2ddn9tf7tch0000gn/T/TemporaryItems/NSIRD_screencaptureui_V0VBS7/æˆªå±2025-03-25%2000.20.57.png)

![æˆªå±2025-03-25 00.21.07.png](/var/folders/_h/mf3tfz6x7wv3t2ddn9tf7tch0000gn/T/TemporaryItems/NSIRD_screencaptureui_Go2QZn/æˆªå±2025-03-25%2000.21.07.png)

![æˆªå±2025-03-25 00.39.06.png](/var/folders/_h/mf3tfz6x7wv3t2ddn9tf7tch0000gn/T/TemporaryItems/NSIRD_screencaptureui_n37D0o/æˆªå±2025-03-25%2000.39.06.png)

![æˆªå±2025-03-25 00.40.14.png](/var/folders/_h/mf3tfz6x7wv3t2ddn9tf7tch0000gn/T/TemporaryItems/NSIRD_screencaptureui_PMcfdV/æˆªå±2025-03-25%2000.40.14.png)

![æˆªå±2025-03-25 00.40.25.png](/var/folders/_h/mf3tfz6x7wv3t2ddn9tf7tch0000gn/T/TemporaryItems/NSIRD_screencaptureui_JRdcFt/æˆªå±2025-03-25%2000.40.25.png)



---

**ä¸ƒã€åŠŸèƒ½å®ç°æƒ…å†µè¯´æ˜**

| **åŠŸèƒ½ç‚¹**         | **æ˜¯å¦å®Œæˆ** | **è¯´æ˜**              |
| --------------- | -------- | ------------------- |
| 1. æ”¯æŒå¤šä¸ªæ¸¸æˆ       | âœ…        | game_id åŒºåˆ†å¤šä¸ªæ¯”èµ›      |
| 2. åˆ›å»ºæ¯”èµ›         | âœ…        | æ”¯æŒåˆ›å»ºã€åˆ†é… game_id     |
| 3. æ·»åŠ è¿åŠ¨å‘˜        | âœ…        | é‡å¤æ·»åŠ è¿”å›æŠ¥é”™            |
| 4. æäº¤ä½ç½® / åˆ¤æ–­å‰ä¸‰å | âœ…        | åŒ…å«è·ç¦»åˆ¤æ–­å’Œæ—¶é—´æ’åº         |
| 5. æŸ¥è¯¢é€”ç»ç‚¹å’ŒçŠ¶æ€     | âœ…        | çŠ¶æ€å’Œåæ ‡éƒ½è¿”å›            |
| 6. æŸ¥è¯¢æ˜¯å¦ç»“æŸ       | âœ…        | æœ‰çŠ¶æ€å­—æ®µï¼Œè¿”å›å‰ä¸‰å         |
| 7. æ¯”èµ›ç»“æŸé€šçŸ¥       | âœ…ï¼ˆè¢«åŠ¨è¿”å›ï¼‰  | åœ¨æ¯æ¬¡ä½ç½®æ›´æ–°ä¸­è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦ç»“æŸå¹¶å‘ŠçŸ¥ |
